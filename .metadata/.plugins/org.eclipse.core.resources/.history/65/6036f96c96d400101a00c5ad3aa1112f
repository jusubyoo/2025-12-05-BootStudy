<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.web.mapper.BoardMapper">
  <select id="boardListData" resultType="com.sist.web.vo.BoardVO" parameterType="hashmap">
    SELECT no,subject,name,TO_CHAR(regdate,'YYYY-MM-DD') as dbday,hit,num
    FROM (SELECT no,subject,name,regdate,hit,rownum as num
    FROM (SELECT no,subject,name,regdate,hit
    FROM SpringReplyBoard ORDER BY no DESC))
    WHERE num BETWEEN #{start} AND #{end}
  </select>
  <select id="boardRowCount" resultType="int">
    SELECT COUNT(*) FROM SpringReplyBoard
  </select>
  
  <insert id="boardInsert" parameterType="com.sist.web.vo.BoardVO">
    INSERT INTO SpringReplyBoard(no,name,subject,content,pwd,group_id)
    VALUES (srb_no_seq.nextval,#{name},#{subject},#{content},#{pwd},(SELECT NVL(MAX(group_id)+1,1) FROM SpringReplyBoard))
  </insert>
</mapper>